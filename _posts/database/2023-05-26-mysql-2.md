---
layout: post
title: Real MySQL 8.0 (2) - 사용자 및 권한
date: 2023-05-26
categories: [database, mysql]
tags: [database, mysql]
---
# Real MySQL 8.0 (2) - 사용자 및 권한
- MySQL의 사용자 계정은 아이디뿐 아니라 IP도 확인
- 8.0부터는 권한을 묶어서 관리하는 역할(Role)의 개념 도입

***
## 사용자 식별
- `'[id]'@'[ip]'`로 저장
  - `'database_id'@'127.0.0.1'`: 127.0.0.1 IP에서만 접속 가능한 계정
  - `'database_id'@'%'`: 모든 IP에서 접속 가능한 계정
- 동일한 아이디 & 다른 아이피 계정이 존재할 경우(보통의 경우 이렇게 계정을 생성하지 않는다.)
  - 권한이나 계정 정보에 대해 더 작은 범위를 우선적으로 선택한다.
  - `'database_id'@'123.123.123.123'`의 비밀번호는 123 / `'database_id'@'%'`의 비밀번호는 abc
  - 123.123.123.123에서 접속하는 경우
    - 비밀번호로 123을 입력하면 접속 성공
    - 비밀번호로 abc를 입력하면 접속 실패

***
## 사용자 계정 관리

### 시스템 계정과 일반 계정
`SYSTEM_USER` 권한 여부에 따라 시스템 게정(`System Account`)과 일반 계정(`Regular Account`)을 구분
- 시스템 계정과 일반 계정
  - 시스템 계정과 일반 계정은 모두 사용자를 위한 계정
  - 시스템 계정은 데이터베이스 서버 관리자에게 부여할 계정
  - 시스템 계정은 서버 내부적으로 실행되는 백그라운드 스레드와는 무관
  - 시스템 계정은 시스템 계정, 일반 계정을 관리(생성, 삭제, 변경)
  - 다른 세션(connection) 또는 그 세션에서 실행 중인 쿼리를 강제 종료 
  - 스토어드 프로그램 생성 시 DEFINER를 타 사용자로 설정

#### MySQL 서버의 내장 계정
- `'root'@'localhost'`
- `'mysql.sys'@'localhost'`
  - 8.0부터 기본 내장된 sys 스키마의 객체(뷰나 함수, 프로시저)들의 DEFINER로 사용되는 계정
- `'mysql.session'@'localhost'`
  - MySQL 플러그인이 서버로 접근할 때 사용되는 계정
- `'mysql.infoschema'@'localhost'`
  - information_schema에 정의된 뷰의 DEFINER로 사용되는 계정


